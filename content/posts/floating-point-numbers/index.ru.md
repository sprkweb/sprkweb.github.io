---
title: "–í–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º –Ω—É–∂–Ω—ã –Ω–µ —á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π"
date: 2023-02-26
lastmod: 2023-02-26
tags: [Golang]
---

–í —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –µ—Å—Ç—å –º–Ω–æ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —á—Ä–µ–≤–∞—Ç—ã –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—Å—è –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é. –û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –∑–Ω–∞–º–µ–Ω–∏—Ç—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ ‚Äî –æ–ø–µ—Ä–∞—Ç–æ—Ä goto. –ö —Ç–∞–∫–∏–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º —Å—Ç–æ–∏—Ç –æ—Ç–Ω–æ—Å–∏—Ç—å –∏ —á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π –∑–∞–ø—è—Ç–æ–π.
<!--more-->

## –ü–æ—á–µ–º—É?

–ù–µ –±—É–¥—É –ø–µ—Ä–µ—á–∏—Å–ª—è—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —á–∏—Å–µ–ª —Å –ø–ª–∞–≤–∞—é—â–µ–π –∑–∞–ø—è—Ç–æ–π: —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Å–æ –º–Ω–æ–≥–∏–º–∏ –∏–∑ –Ω–∏—Ö –≤—ã —É–∂–µ –∑–Ω–∞–∫–æ–º—ã, –∞ –µ—Å–ª–∏ –Ω–µ—Ç, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ—á–∏—Ç–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏:

- [–ß—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –ø—Ä–æ –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫—É —Å –ø–ª–∞–≤–∞—é—â–µ–π –∑–∞–ø—è—Ç–æ–π](https://habr.com/ru/post/112953/)
- [Examples of floating point problems](https://jvns.ca/blog/2023/01/13/examples-of-floating-point-problems/)
- [Ordering Numbers, How Hard Can It Be?](https://orlp.net/blog/ordering-numbers/)

–¢–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–æ–∑–¥–∞—ë—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –æ—à–∏–±–æ–∫. –ú–Ω–æ–≥–∏–µ –ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã –º–æ–≥—É—Ç, –æ—Å–æ–±–æ –Ω–µ –¥—É–º–∞—è, —Å–∫–∞–∑–∞—Ç—å –¥–ª—è –∫–∞–∫–æ–≥–æ-–Ω–∏–±—É–¥—å —Å–ª—É—á–∞—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —à–∞–≥ –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–∏—Å–ª–∞?

–ù–µ –ø–æ–π–º–∏—Ç–µ –º–µ–Ω—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: –ø–æ—Å—ã–ª —Å—Ç–∞—Ç—å–∏ –Ω–µ –≤ —Ç–æ–º, —á—Ç–æ —á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π –∑–∞–ø—è—Ç–æ–π –Ω–µ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –û–Ω–∏ ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–æ —Å–≤–æ–µ–π –æ–±–ª–∞—Å—Ç—å—é –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è. –≠—Ç–∞ —Å—Ç–∞—Ç—å—è –æ —Ç–æ–º, **–≤ –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**.

## –ò —á—Ç–æ –¥–µ–ª–∞—Ç—å?

–ï—Å–ª–∏ –≤ –∫–∞–∫–æ–º-—Ç–æ –º–µ—Å—Ç–µ —Ö–æ—á–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π –∑–∞–ø—è—Ç–æ–π, –º–æ–∂–Ω–æ –≤–º–µ—Å—Ç–æ –Ω–∏—Ö —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

### 1. –¶–µ–ª—ã–µ —á–∏—Å–ª–∞

–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã, —Å—á—ë—Ç—á–∏–∫–∏, –ø–æ—Ä—è–¥–∫–æ–≤—ã–µ –Ω–æ–º–µ—Ä–∞ ‚Äî —Å–∞–º—ã–µ –æ—á–µ–≤–∏–¥–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –ª—É—á—à–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å –∫–∞–∫ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞. –ù–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ —Å–ª—É—á–∞–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö, –µ—Å–ª–∏ –ø–æ–¥—É–º–∞—Ç—å –¥–≤–∞–∂–¥—ã, —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ –æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ª—É—á—à–∏–º —Ä–µ—à–µ–Ω–∏–µ–º. 

–¢–∞–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Ö—Ä–∞–Ω–∏—Ç—å –¥—Ä–æ–±–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤, —Ç–æ, –≤–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–æ–∏—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∏—Ö –Ω–µ –∫–∞–∫ –∫–∏–ª–æ–º–µ—Ç—Ä—ã, –∞ –∫–∞–∫ –º–µ—Ç—Ä—ã / —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä—ã / –º–∏–ª–ª–∏–º–µ—Ç—Ä—ã:

```go
// ‚ùå –∑–¥–µ—Å—å –Ω–µ —Ä–æ–≤–Ω–æ 17.529 –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤
distanceKilometers := 17.529

// üëç —Ç–∞–∫ –ª—É—á—à–µ!
distanceMeters := 17529
```

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –º–æ–∂–Ω–æ –ø–æ—Å—Ç—É–ø–∞—Ç—å –∏ —Å –¥—Ä—É–≥–∏–º–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ –≤–µ–ª–∏—á–∏–Ω–∞–º–∏.

### 2. –î–µ—Å—è—Ç–∏—á–Ω—ã–µ —á–∏—Å–ª–∞

–í —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ —Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π –≤—Å—ë –∂–µ –Ω–µ –∏–∑–≤–µ—Å—Ç–Ω–∞, –Ω–æ –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤ –¥–µ—Å—è—Ç–∏—á–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–æ —Ö—Ä–∞–Ω–∏–º–æ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—É–º–º), –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö —á–∏—Å–µ–ª.

–í Python, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –µ—Å—Ç—å –º–æ–¥—É–ª—å `decimal`:

```python
>>> my_salary = 10.1
>>> print("{:.16f}".format(my_salary))
10.0999999999999996

>>> from decimal import *
>>> my_salary = Decimal('10.1')
>>> print("{:.16f}".format(my_salary))
10.1000000000000000
```

### 3. –†–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–∞

–ò–Ω–æ–≥–¥–∞ –¥—Ä–æ–±–Ω—ã–µ —á–∏—Å–ª–∞ –¥–µ–ª—è—Ç—Å—è –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–µ —á–∏—Å–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –∫—Ä–∞—Ç–Ω–æ –¥–µ—Å—è—Ç–∏:

```go
import "fmt"

func main() {
    fullPageWidth := 1000
    blocksAmount := 3
    blockWidth := fullPageWidth / blocksAmount

    if (blockWidth * blocksAmount) != fullPageWidth {
        fmt.Println("We need a perfect fit!") 
    } else {
        fmt.Println("Perfect!")
    }
}

//=> We need a perfect fit!
```

–í —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–∞:

```go
import (
    "fmt"
    "math/big"
)

func main() {
    fullPageWidth := new(big.Rat).SetInt64(1000)
    blocksAmount := new(big.Rat).SetInt64(3)
    blockWidth := new(big.Rat).Quo(fullPageWidth, blocksAmount)

    if new(big.Rat).Mul(blockWidth, blocksAmount).Cmp(fullPageWidth) != 0 {
        fmt.Println("We need a perfect fit!")
    } else {
        fmt.Println("Perfect!")
    }
}

//=> Perfect!
```

### 4. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –≤–µ–ª–∏—á–∏–Ω

–í–æ –º–Ω–æ–≥–∏—Ö –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —è–∑—ã–∫–∞—Ö —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è —Ç–∞–∫–∏—Ö –≤–µ–ª–∏—á–∏–Ω, –∫–∞–∫ –≤—Ä–µ–º—è –∏ –¥–µ–Ω—å–≥–∏. –°—Ç–æ–∏—Ç –∏–∑—É—á–∏—Ç—å –∏—Ö –Ω–∞–ª–∏—á–∏–µ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏: —É —Ç–∞–∫–∏—Ö —Ç–∏–ø–æ–≤ —É–∂–µ –ø—Ä–æ–¥—É–º–∞–Ω –º–µ—Ç–æ–¥ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –≤—Å–µ –Ω—É–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏.

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä–æ–±–Ω—ã–µ —á–∏—Å–ª–∞, –≤–æ–∑–º–æ–∂–Ω–æ, —á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π –∑–∞–ø—è—Ç–æ–π ‚Äî –Ω–µ —Ç–æ, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ.

–ß–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π –∑–∞–ø—è—Ç–æ–π —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–µ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–∞ –∏ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–ø–æ–ª–Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç.

–í –¥—Ä—É–≥–∏—Ö —Å–ª—É—á–∞—è—Ö –≤–º–µ—Å—Ç–æ –Ω–∏—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞, –¥–µ—Å—è—Ç–∏—á–Ω—ã–µ —á–∏—Å–ª–∞, —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–∞ –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –≤–µ–ª–∏—á–∏–Ω, —Ç–∞–∫–∏—Ö –∫–∞–∫ –¥–µ–Ω—å–≥–∏ –∏ –≤—Ä–µ–º—è.
